INFO:     Will watch for changes in these directories: ['/Users/jordannakamoto/start/ai-service']
INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [4299] using WatchFiles
INFO:     Started server process [4302]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     127.0.0.1:64480 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64504 - "POST /assistant-message HTTP/1.1" 200 OK
/Users/jordannakamoto/start/ai-service/pocketflow.py:7: UserWarning: Overwriting successor for action 'default'
  if action in self.successors: warnings.warn(f"Overwriting successor for action '{action}'")
INFO:     127.0.0.1:64514 - "POST /ingest-pdf HTTP/1.1" 200 OK
INFO:     127.0.0.1:64514 - "POST /assistant-message HTTP/1.1" 200 OK
INFO:     127.0.0.1:64514 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64514 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64514 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64514 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64514 - "POST /resolve-citation HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'services.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [4302]
INFO:     Started server process [4849]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     127.0.0.1:64554 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64558 - "POST /resolve-citation HTTP/1.1" 200 OK
/Users/jordannakamoto/start/ai-service/pocketflow.py:7: UserWarning: Overwriting successor for action 'default'
  if action in self.successors: warnings.warn(f"Overwriting successor for action '{action}'")
INFO:     127.0.0.1:64567 - "POST /ingest-pdf HTTP/1.1" 200 OK
INFO:     127.0.0.1:64567 - "POST /assistant-message HTTP/1.1" 200 OK
INFO:     127.0.0.1:64567 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64567 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64567 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64567 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64567 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64567 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64567 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64567 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64567 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64567 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64567 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64574 - "POST /assistant-message HTTP/1.1" 200 OK
INFO:     127.0.0.1:64574 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64574 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64574 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64574 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64574 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64574 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64574 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64574 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64574 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64574 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64648 - "OPTIONS /ingest-pdf HTTP/1.1" 200 OK
/Users/jordannakamoto/start/ai-service/pocketflow.py:7: UserWarning: Overwriting successor for action 'default'
  if action in self.successors: warnings.warn(f"Overwriting successor for action '{action}'")
INFO:     127.0.0.1:64648 - "POST /ingest-pdf HTTP/1.1" 200 OK
INFO:     127.0.0.1:64648 - "OPTIONS /assistant-message HTTP/1.1" 200 OK
INFO:     127.0.0.1:64648 - "POST /assistant-message HTTP/1.1" 200 OK
INFO:     127.0.0.1:64648 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64648 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64648 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64648 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64648 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64652 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64652 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64652 - "POST /resolve-citation HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'services.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [4849]
INFO:     Started server process [5251]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'test_pdf_summary.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [5251]
INFO:     Started server process [5263]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'test_pdf_summary.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [5263]
INFO:     Started server process [5316]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
/Users/jordannakamoto/start/ai-service/pocketflow.py:7: UserWarning: Overwriting successor for action 'default'
  if action in self.successors: warnings.warn(f"Overwriting successor for action '{action}'")
INFO:     127.0.0.1:64774 - "POST /ingest-pdf HTTP/1.1" 200 OK
INFO:     127.0.0.1:64774 - "POST /assistant-message HTTP/1.1" 200 OK
INFO:     127.0.0.1:64774 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64774 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64774 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64774 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64774 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64774 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64774 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64774 - "POST /resolve-citation HTTP/1.1" 200 OK
/Users/jordannakamoto/start/ai-service/pocketflow.py:7: UserWarning: Overwriting successor for action 'default'
  if action in self.successors: warnings.warn(f"Overwriting successor for action '{action}'")
INFO:     127.0.0.1:64784 - "POST /ingest-pdf HTTP/1.1" 200 OK
INFO:     127.0.0.1:64784 - "POST /assistant-message HTTP/1.1" 200 OK
INFO:     127.0.0.1:64784 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64784 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64784 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64784 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64784 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64784 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64784 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64784 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64784 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64784 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64784 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64784 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64784 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64784 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64796 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64796 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64796 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64798 - "POST /assistant-message HTTP/1.1" 200 OK
INFO:     127.0.0.1:64798 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64798 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64798 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64798 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64798 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64798 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64798 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64798 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64798 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64798 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64798 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64798 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64798 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64798 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64888 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64888 - "POST /resolve-citation HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'services.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [5316]
INFO:     Started server process [5808]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'services.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [5808]
INFO:     Started server process [5818]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     127.0.0.1:64924 - "POST /assistant-message HTTP/1.1" 200 OK
/Users/jordannakamoto/start/ai-service/pocketflow.py:7: UserWarning: Overwriting successor for action 'default'
  if action in self.successors: warnings.warn(f"Overwriting successor for action '{action}'")
INFO:     127.0.0.1:64928 - "POST /ingest-pdf HTTP/1.1" 200 OK
INFO:     127.0.0.1:64928 - "POST /assistant-message HTTP/1.1" 200 OK
INFO:     127.0.0.1:64928 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64928 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64928 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64928 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64928 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64928 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64928 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64928 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64928 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64928 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64928 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64928 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64928 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64928 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64931 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64931 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64931 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64931 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64931 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64931 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:64931 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:65017 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:65053 - "OPTIONS /ingest-pdf HTTP/1.1" 200 OK
/Users/jordannakamoto/start/ai-service/pocketflow.py:7: UserWarning: Overwriting successor for action 'default'
  if action in self.successors: warnings.warn(f"Overwriting successor for action '{action}'")
INFO:     127.0.0.1:65053 - "POST /ingest-pdf HTTP/1.1" 200 OK
INFO:     127.0.0.1:65053 - "OPTIONS /assistant-message HTTP/1.1" 200 OK
INFO:     127.0.0.1:65053 - "POST /assistant-message HTTP/1.1" 200 OK
INFO:     127.0.0.1:65053 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:65053 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:65053 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:65053 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:65053 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:65053 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:65053 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:65053 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:65053 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:65053 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:65053 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:65053 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:65053 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:65053 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:65053 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:65056 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:65081 - "POST /resolve-citation HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'services.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [5818]
INFO:     Started server process [6075]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     127.0.0.1:65092 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:65094 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:65094 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:65094 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:65094 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:65094 - "POST /resolve-citation HTTP/1.1" 200 OK
/Users/jordannakamoto/start/ai-service/pocketflow.py:7: UserWarning: Overwriting successor for action 'default'
  if action in self.successors: warnings.warn(f"Overwriting successor for action '{action}'")
🔍 DEBUG: Received 1 pages
🔍 DEBUG: Total characters: 9530
🔍 DEBUG: Page 1: 9530 characters
🔍 DEBUG: Page 1 preview: Sample Contract Contract No.___________ PROFESSIONAL SERVICES AGREEMENT THIS AGREEMENT made and ente...
INFO:     127.0.0.1:65190 - "POST /ingest-pdf HTTP/1.1" 200 OK
INFO:     127.0.0.1:65304 - "OPTIONS /ingest-pdf HTTP/1.1" 200 OK
/Users/jordannakamoto/start/ai-service/pocketflow.py:7: UserWarning: Overwriting successor for action 'default'
  if action in self.successors: warnings.warn(f"Overwriting successor for action '{action}'")
🔍 DEBUG: Received 1 pages
🔍 DEBUG: Total characters: 9530
🔍 DEBUG: Page 1: 9530 characters
🔍 DEBUG: Page 1 preview: Sample Contract Contract No.___________ PROFESSIONAL SERVICES AGREEMENT THIS AGREEMENT made and ente...
INFO:     127.0.0.1:65304 - "POST /ingest-pdf HTTP/1.1" 200 OK
INFO:     127.0.0.1:65304 - "OPTIONS /assistant-message HTTP/1.1" 200 OK
INFO:     127.0.0.1:65304 - "POST /assistant-message HTTP/1.1" 200 OK
INFO:     127.0.0.1:65304 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:65304 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:65304 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:65304 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:65304 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:65304 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:65304 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:65304 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:65304 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:65304 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:65304 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:65304 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:65304 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:65304 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:65304 - "POST /resolve-citation HTTP/1.1" 200 OK
🔍 DEBUG: Received 1 pages
🔍 DEBUG: Total characters: 31750
🔍 DEBUG: Page 1: 31750 characters
🔍 DEBUG: Page 1 preview: Sample Contract Contract No.___________ PROFESSIONAL SERVICES AGREEMENT THIS AGREEMENT made and ente...
INFO:     127.0.0.1:65454 - "POST /ingest-pdf HTTP/1.1" 200 OK
INFO:     127.0.0.1:65454 - "POST /assistant-message HTTP/1.1" 200 OK
INFO:     127.0.0.1:65454 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:65460 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:65462 - "POST /assistant-message HTTP/1.1" 200 OK
INFO:     127.0.0.1:65462 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:65462 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:65462 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:65462 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:65462 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:65462 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:65462 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:65462 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:65462 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:65462 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:65462 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:65462 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:65462 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:65462 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:65462 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:65462 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:65462 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:65462 - "POST /resolve-citation HTTP/1.1" 200 OK
🔍 DEBUG: Received 1 pages
🔍 DEBUG: Total characters: 31201
🔍 DEBUG: Page 1: 31201 characters
🔍 DEBUG: Page 1 preview: Sample ContractContract No.___________PROFESSIONAL SERVICES AGREEMENTTHIS AGREEMENT made and entered...
INFO:     127.0.0.1:49259 - "POST /ingest-pdf HTTP/1.1" 200 OK
INFO:     127.0.0.1:49259 - "POST /assistant-message HTTP/1.1" 200 OK
INFO:     127.0.0.1:49259 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:49259 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:49259 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:49259 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:49259 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:49259 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:49259 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:49259 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:49259 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:49259 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:49259 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:49259 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:49259 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:49259 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:49259 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:49259 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:49259 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:49259 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:49259 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:49259 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:49259 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:49265 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:49267 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:49269 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:49271 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:49273 - "POST /resolve-citation HTTP/1.1" 200 OK
🔍 DEBUG: Received 1 pages
🔍 DEBUG: Total characters: 31201
🔍 DEBUG: Page 1: 31201 characters
🔍 DEBUG: Page 1 preview: Sample ContractContract No.___________PROFESSIONAL SERVICES AGREEMENTTHIS AGREEMENT made and entered...
INFO:     127.0.0.1:49277 - "POST /ingest-pdf HTTP/1.1" 200 OK
INFO:     127.0.0.1:49277 - "POST /assistant-message HTTP/1.1" 200 OK
INFO:     127.0.0.1:49277 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:49277 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:49277 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:49277 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:49277 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:49277 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:49277 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:49277 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:49277 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:49277 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:49277 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:49280 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:49282 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:49288 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:49967 - "OPTIONS /ingest-pdf HTTP/1.1" 200 OK
🔍 DEBUG: Received 1 pages
🔍 DEBUG: Total characters: 31201
🔍 DEBUG: Page 1: 31201 characters
🔍 DEBUG: Page 1 preview: Sample ContractContract No.___________PROFESSIONAL SERVICES AGREEMENTTHIS AGREEMENT made and entered...
INFO:     127.0.0.1:49967 - "POST /ingest-pdf HTTP/1.1" 200 OK
INFO:     127.0.0.1:49967 - "OPTIONS /assistant-message HTTP/1.1" 200 OK
INFO:     127.0.0.1:49969 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:49967 - "POST /assistant-message HTTP/1.1" 200 OK
INFO:     127.0.0.1:49969 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:49967 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:49969 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:49967 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:49969 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:49967 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:49969 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:49967 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:49969 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:49967 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:49969 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:49967 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:49969 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:49967 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:49969 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:49973 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:49975 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:49977 - "POST /resolve-citation HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'citation_system.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [6075]
INFO:     Started server process [7646]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'semantic_inference.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [7646]
INFO:     Started server process [7713]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'services.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [7713]
INFO:     Started server process [7726]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'services.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [7726]
INFO:     Started server process [7729]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'services.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [7729]
INFO:     Started server process [7736]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'services.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [7736]
INFO:     Started server process [7741]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     127.0.0.1:50176 - "OPTIONS /ingest-pdf HTTP/1.1" 200 OK
/Users/jordannakamoto/start/ai-service/pocketflow.py:7: UserWarning: Overwriting successor for action 'default'
  if action in self.successors: warnings.warn(f"Overwriting successor for action '{action}'")
🔍 DEBUG: Received 1 pages
🔍 DEBUG: Total characters: 31201
🔍 DEBUG: Page 1: 31201 characters
🔍 DEBUG: Page 1 preview: Sample ContractContract No.___________PROFESSIONAL SERVICES AGREEMENTTHIS AGREEMENT made and entered...
INFO:     127.0.0.1:50176 - "POST /ingest-pdf HTTP/1.1" 200 OK
INFO:     127.0.0.1:50176 - "OPTIONS /assistant-message HTTP/1.1" 200 OK
INFO:     127.0.0.1:50176 - "POST /assistant-message HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'enhanced_inference.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [7741]
INFO:     Started server process [7971]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'services.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [7971]
Process SpawnProcess-16:
Traceback (most recent call last):
  File "/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
    ~~~~~~~~^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/jordannakamoto/start/ai-service/ai-service-env/lib/python3.13/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    ~~~~~~^^^^^^^^^^^^^^^^^
  File "/Users/jordannakamoto/start/ai-service/ai-service-env/lib/python3.13/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
  File "/Users/jordannakamoto/start/ai-service/ai-service-env/lib/python3.13/site-packages/uvicorn/server.py", line 71, in serve
    await self._serve(sockets)
  File "/Users/jordannakamoto/start/ai-service/ai-service-env/lib/python3.13/site-packages/uvicorn/server.py", line 78, in _serve
    config.load()
    ~~~~~~~~~~~^^
  File "/Users/jordannakamoto/start/ai-service/ai-service-env/lib/python3.13/site-packages/uvicorn/config.py", line 436, in load
    self.loaded_app = import_from_string(self.app)
                      ~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/Users/jordannakamoto/start/ai-service/ai-service-env/lib/python3.13/site-packages/uvicorn/importer.py", line 19, in import_from_string
    module = importlib.import_module(module_str)
  File "/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/importlib/__init__.py", line 88, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 1026, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "/Users/jordannakamoto/start/ai-service/main.py", line 4, in <module>
    from services import ingest_pdf, process_assistant_message, resolve_citation
  File "/Users/jordannakamoto/start/ai-service/services.py", line 21, in <module>
    semantic_engine = SemanticInferenceEngine(openai_client)
                      ^^^^^^^^^^^^^^^^^^^^^^^
NameError: name 'SemanticInferenceEngine' is not defined. Did you mean: 'EnhancedInferenceEngine'?
WARNING:  WatchFiles detected changes in 'services.py'. Reloading...
INFO:     Started server process [7989]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'services.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [7989]
INFO:     Started server process [8006]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     127.0.0.1:50273 - "POST /assistant-message HTTP/1.1" 200 OK
/Users/jordannakamoto/start/ai-service/pocketflow.py:7: UserWarning: Overwriting successor for action 'default'
  if action in self.successors: warnings.warn(f"Overwriting successor for action '{action}'")
🔍 DEBUG: Received 1 pages
🔍 DEBUG: Total characters: 31201
🔍 DEBUG: Page 1: 31201 characters
🔍 DEBUG: Page 1 preview: Sample ContractContract No.___________PROFESSIONAL SERVICES AGREEMENTTHIS AGREEMENT made and entered...
INFO:     127.0.0.1:50277 - "POST /ingest-pdf HTTP/1.1" 200 OK
🔍 Enhanced Analysis: 10 citations validated
INFO:     127.0.0.1:50277 - "POST /assistant-message HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'deterministic_analysis.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [8006]
INFO:     Started server process [8234]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'services.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [8234]
Process SpawnProcess-20:
Traceback (most recent call last):
  File "/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
    ~~~~~~~~^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/jordannakamoto/start/ai-service/ai-service-env/lib/python3.13/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    ~~~~~~^^^^^^^^^^^^^^^^^
  File "/Users/jordannakamoto/start/ai-service/ai-service-env/lib/python3.13/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
  File "/Users/jordannakamoto/start/ai-service/ai-service-env/lib/python3.13/site-packages/uvicorn/server.py", line 71, in serve
    await self._serve(sockets)
  File "/Users/jordannakamoto/start/ai-service/ai-service-env/lib/python3.13/site-packages/uvicorn/server.py", line 78, in _serve
    config.load()
    ~~~~~~~~~~~^^
  File "/Users/jordannakamoto/start/ai-service/ai-service-env/lib/python3.13/site-packages/uvicorn/config.py", line 436, in load
    self.loaded_app = import_from_string(self.app)
                      ~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/Users/jordannakamoto/start/ai-service/ai-service-env/lib/python3.13/site-packages/uvicorn/importer.py", line 22, in import_from_string
    raise exc from None
  File "/Users/jordannakamoto/start/ai-service/ai-service-env/lib/python3.13/site-packages/uvicorn/importer.py", line 19, in import_from_string
    module = importlib.import_module(module_str)
  File "/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/importlib/__init__.py", line 88, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 1026, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "/Users/jordannakamoto/start/ai-service/main.py", line 4, in <module>
    from services import ingest_pdf, process_assistant_message, resolve_citation
  File "/Users/jordannakamoto/start/ai-service/services.py", line 10, in <module>
    from deterministic_analysis import DeterministicAnalysisEngine
  File "/Users/jordannakamoto/start/ai-service/deterministic_analysis.py", line 17, in <module>
    import spacy
ModuleNotFoundError: No module named 'spacy'
WARNING:  WatchFiles detected changes in 'services.py'. Reloading...
Process SpawnProcess-21:
Traceback (most recent call last):
  File "/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
    ~~~~~~~~^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/jordannakamoto/start/ai-service/ai-service-env/lib/python3.13/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    ~~~~~~^^^^^^^^^^^^^^^^^
  File "/Users/jordannakamoto/start/ai-service/ai-service-env/lib/python3.13/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
  File "/Users/jordannakamoto/start/ai-service/ai-service-env/lib/python3.13/site-packages/uvicorn/server.py", line 71, in serve
    await self._serve(sockets)
  File "/Users/jordannakamoto/start/ai-service/ai-service-env/lib/python3.13/site-packages/uvicorn/server.py", line 78, in _serve
    config.load()
    ~~~~~~~~~~~^^
  File "/Users/jordannakamoto/start/ai-service/ai-service-env/lib/python3.13/site-packages/uvicorn/config.py", line 436, in load
    self.loaded_app = import_from_string(self.app)
                      ~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/Users/jordannakamoto/start/ai-service/ai-service-env/lib/python3.13/site-packages/uvicorn/importer.py", line 22, in import_from_string
    raise exc from None
  File "/Users/jordannakamoto/start/ai-service/ai-service-env/lib/python3.13/site-packages/uvicorn/importer.py", line 19, in import_from_string
    module = importlib.import_module(module_str)
  File "/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/importlib/__init__.py", line 88, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 1026, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "/Users/jordannakamoto/start/ai-service/main.py", line 4, in <module>
    from services import ingest_pdf, process_assistant_message, resolve_citation
  File "/Users/jordannakamoto/start/ai-service/services.py", line 10, in <module>
    from deterministic_analysis import DeterministicAnalysisEngine
  File "/Users/jordannakamoto/start/ai-service/deterministic_analysis.py", line 17, in <module>
    import spacy
ModuleNotFoundError: No module named 'spacy'
WARNING:  WatchFiles detected changes in 'services.py'. Reloading...
Process SpawnProcess-22:
Traceback (most recent call last):
  File "/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
    ~~~~~~~~^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/jordannakamoto/start/ai-service/ai-service-env/lib/python3.13/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    ~~~~~~^^^^^^^^^^^^^^^^^
  File "/Users/jordannakamoto/start/ai-service/ai-service-env/lib/python3.13/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
  File "/Users/jordannakamoto/start/ai-service/ai-service-env/lib/python3.13/site-packages/uvicorn/server.py", line 71, in serve
    await self._serve(sockets)
  File "/Users/jordannakamoto/start/ai-service/ai-service-env/lib/python3.13/site-packages/uvicorn/server.py", line 78, in _serve
    config.load()
    ~~~~~~~~~~~^^
  File "/Users/jordannakamoto/start/ai-service/ai-service-env/lib/python3.13/site-packages/uvicorn/config.py", line 436, in load
    self.loaded_app = import_from_string(self.app)
                      ~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/Users/jordannakamoto/start/ai-service/ai-service-env/lib/python3.13/site-packages/uvicorn/importer.py", line 22, in import_from_string
    raise exc from None
  File "/Users/jordannakamoto/start/ai-service/ai-service-env/lib/python3.13/site-packages/uvicorn/importer.py", line 19, in import_from_string
    module = importlib.import_module(module_str)
  File "/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/importlib/__init__.py", line 88, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 1026, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "/Users/jordannakamoto/start/ai-service/main.py", line 4, in <module>
    from services import ingest_pdf, process_assistant_message, resolve_citation
  File "/Users/jordannakamoto/start/ai-service/services.py", line 10, in <module>
    from deterministic_analysis import DeterministicAnalysisEngine
  File "/Users/jordannakamoto/start/ai-service/deterministic_analysis.py", line 17, in <module>
    import spacy
ModuleNotFoundError: No module named 'spacy'
WARNING:  WatchFiles detected changes in 'deterministic_analysis.py'. Reloading...
Process SpawnProcess-23:
Traceback (most recent call last):
  File "/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
    ~~~~~~~~^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/jordannakamoto/start/ai-service/ai-service-env/lib/python3.13/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    ~~~~~~^^^^^^^^^^^^^^^^^
  File "/Users/jordannakamoto/start/ai-service/ai-service-env/lib/python3.13/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
  File "/Users/jordannakamoto/start/ai-service/ai-service-env/lib/python3.13/site-packages/uvicorn/server.py", line 71, in serve
    await self._serve(sockets)
  File "/Users/jordannakamoto/start/ai-service/ai-service-env/lib/python3.13/site-packages/uvicorn/server.py", line 78, in _serve
    config.load()
    ~~~~~~~~~~~^^
  File "/Users/jordannakamoto/start/ai-service/ai-service-env/lib/python3.13/site-packages/uvicorn/config.py", line 436, in load
    self.loaded_app = import_from_string(self.app)
                      ~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/Users/jordannakamoto/start/ai-service/ai-service-env/lib/python3.13/site-packages/uvicorn/importer.py", line 22, in import_from_string
    raise exc from None
  File "/Users/jordannakamoto/start/ai-service/ai-service-env/lib/python3.13/site-packages/uvicorn/importer.py", line 19, in import_from_string
    module = importlib.import_module(module_str)
  File "/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/importlib/__init__.py", line 88, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 1026, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "/Users/jordannakamoto/start/ai-service/main.py", line 4, in <module>
    from services import ingest_pdf, process_assistant_message, resolve_citation
  File "/Users/jordannakamoto/start/ai-service/services.py", line 10, in <module>
    from deterministic_analysis import DeterministicAnalysisEngine
  File "/Users/jordannakamoto/start/ai-service/deterministic_analysis.py", line 17, in <module>
    import spacy
ModuleNotFoundError: No module named 'spacy'
WARNING:  WatchFiles detected changes in 'deterministic_analysis.py'. Reloading...
Process SpawnProcess-24:
Traceback (most recent call last):
  File "/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
    ~~~~~~~~^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/jordannakamoto/start/ai-service/ai-service-env/lib/python3.13/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    ~~~~~~^^^^^^^^^^^^^^^^^
  File "/Users/jordannakamoto/start/ai-service/ai-service-env/lib/python3.13/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
  File "/Users/jordannakamoto/start/ai-service/ai-service-env/lib/python3.13/site-packages/uvicorn/server.py", line 71, in serve
    await self._serve(sockets)
  File "/Users/jordannakamoto/start/ai-service/ai-service-env/lib/python3.13/site-packages/uvicorn/server.py", line 78, in _serve
    config.load()
    ~~~~~~~~~~~^^
  File "/Users/jordannakamoto/start/ai-service/ai-service-env/lib/python3.13/site-packages/uvicorn/config.py", line 436, in load
    self.loaded_app = import_from_string(self.app)
                      ~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/Users/jordannakamoto/start/ai-service/ai-service-env/lib/python3.13/site-packages/uvicorn/importer.py", line 22, in import_from_string
    raise exc from None
  File "/Users/jordannakamoto/start/ai-service/ai-service-env/lib/python3.13/site-packages/uvicorn/importer.py", line 19, in import_from_string
    module = importlib.import_module(module_str)
  File "/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/importlib/__init__.py", line 88, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 1026, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "/Users/jordannakamoto/start/ai-service/main.py", line 4, in <module>
    from services import ingest_pdf, process_assistant_message, resolve_citation
  File "/Users/jordannakamoto/start/ai-service/services.py", line 10, in <module>
    from deterministic_analysis import DeterministicAnalysisEngine
  File "/Users/jordannakamoto/start/ai-service/deterministic_analysis.py", line 17, in <module>
    import spacy
ModuleNotFoundError: No module named 'spacy'
WARNING:  WatchFiles detected changes in 'deterministic_analysis.py'. Reloading...
Process SpawnProcess-25:
Traceback (most recent call last):
  File "/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
    ~~~~~~~~^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/jordannakamoto/start/ai-service/ai-service-env/lib/python3.13/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    ~~~~~~^^^^^^^^^^^^^^^^^
  File "/Users/jordannakamoto/start/ai-service/ai-service-env/lib/python3.13/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
  File "/Users/jordannakamoto/start/ai-service/ai-service-env/lib/python3.13/site-packages/uvicorn/server.py", line 71, in serve
    await self._serve(sockets)
  File "/Users/jordannakamoto/start/ai-service/ai-service-env/lib/python3.13/site-packages/uvicorn/server.py", line 78, in _serve
    config.load()
    ~~~~~~~~~~~^^
  File "/Users/jordannakamoto/start/ai-service/ai-service-env/lib/python3.13/site-packages/uvicorn/config.py", line 436, in load
    self.loaded_app = import_from_string(self.app)
                      ~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/Users/jordannakamoto/start/ai-service/ai-service-env/lib/python3.13/site-packages/uvicorn/importer.py", line 22, in import_from_string
    raise exc from None
  File "/Users/jordannakamoto/start/ai-service/ai-service-env/lib/python3.13/site-packages/uvicorn/importer.py", line 19, in import_from_string
    module = importlib.import_module(module_str)
  File "/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/importlib/__init__.py", line 88, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 1026, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "/Users/jordannakamoto/start/ai-service/main.py", line 4, in <module>
    from services import ingest_pdf, process_assistant_message, resolve_citation
  File "/Users/jordannakamoto/start/ai-service/services.py", line 10, in <module>
    from deterministic_analysis import DeterministicAnalysisEngine
  File "/Users/jordannakamoto/start/ai-service/deterministic_analysis.py", line 17, in <module>
    import spacy
ModuleNotFoundError: No module named 'spacy'
WARNING:  WatchFiles detected changes in 'deterministic_analysis.py'. Reloading...
Process SpawnProcess-26:
Traceback (most recent call last):
  File "/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
    ~~~~~~~~^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/jordannakamoto/start/ai-service/ai-service-env/lib/python3.13/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    ~~~~~~^^^^^^^^^^^^^^^^^
  File "/Users/jordannakamoto/start/ai-service/ai-service-env/lib/python3.13/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
  File "/Users/jordannakamoto/start/ai-service/ai-service-env/lib/python3.13/site-packages/uvicorn/server.py", line 71, in serve
    await self._serve(sockets)
  File "/Users/jordannakamoto/start/ai-service/ai-service-env/lib/python3.13/site-packages/uvicorn/server.py", line 78, in _serve
    config.load()
    ~~~~~~~~~~~^^
  File "/Users/jordannakamoto/start/ai-service/ai-service-env/lib/python3.13/site-packages/uvicorn/config.py", line 436, in load
    self.loaded_app = import_from_string(self.app)
                      ~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/Users/jordannakamoto/start/ai-service/ai-service-env/lib/python3.13/site-packages/uvicorn/importer.py", line 19, in import_from_string
    module = importlib.import_module(module_str)
  File "/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/importlib/__init__.py", line 88, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 1026, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "/Users/jordannakamoto/start/ai-service/main.py", line 4, in <module>
    from services import ingest_pdf, process_assistant_message, resolve_citation
  File "/Users/jordannakamoto/start/ai-service/services.py", line 10, in <module>
    from deterministic_analysis import DeterministicAnalysisEngine
  File "/Users/jordannakamoto/start/ai-service/deterministic_analysis.py", line 141, in <module>
    class StructuredKnowledgeExtractor:
    ...<460 lines>...
            return dict(hierarchy)
  File "/Users/jordannakamoto/start/ai-service/deterministic_analysis.py", line 481, in StructuredKnowledgeExtractor
    def _split_into_sentences(self, text: str) -> List[Tuple[str, int, int]]:
                                                       ^^^^^
NameError: name 'Tuple' is not defined. Did you mean: 'tuple'?
WARNING:  WatchFiles detected changes in 'deterministic_analysis.py'. Reloading...
INFO:     Started server process [8410]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'deterministic_analysis.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [8410]
INFO:     Started server process [12241]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'deterministic_analysis.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [12241]
INFO:     Started server process [12253]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
🔍 spaCy not available, using lightweight analysis
INFO:     127.0.0.1:50697 - "OPTIONS /assistant-message HTTP/1.1" 200 OK
INFO:     127.0.0.1:50697 - "POST /assistant-message HTTP/1.1" 200 OK
INFO:     127.0.0.1:50701 - "OPTIONS /ingest-pdf HTTP/1.1" 200 OK
/Users/jordannakamoto/start/ai-service/pocketflow.py:7: UserWarning: Overwriting successor for action 'default'
  if action in self.successors: warnings.warn(f"Overwriting successor for action '{action}'")
🔍 DEBUG: Received 1 pages
🔍 DEBUG: Total characters: 31201
🔍 DEBUG: Page 1: 31201 characters
🔍 DEBUG: Page 1 preview: Sample ContractContract No.___________PROFESSIONAL SERVICES AGREEMENTTHIS AGREEMENT made and entered...
INFO:     127.0.0.1:50701 - "POST /ingest-pdf HTTP/1.1" 200 OK
🔍 Starting deterministic analysis of 50 segments
🔍 Deterministic Analysis: 79 claims, 19 entities
🔍 Claim types: permission, conditional, definition, prohibition, obligation
INFO:     127.0.0.1:50701 - "POST /assistant-message HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'services.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [12253]
INFO:     Started server process [13248]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'deterministic_analysis.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [13248]
INFO:     Started server process [16386]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'deterministic_analysis.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [16386]
INFO:     Started server process [16396]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'deterministic_analysis.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [16396]
INFO:     Started server process [16406]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'deterministic_analysis.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [16406]
INFO:     Started server process [16416]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'deterministic_analysis.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [16416]
INFO:     Started server process [16425]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'deterministic_analysis.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [16425]
INFO:     Started server process [16437]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'deterministic_analysis.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [16437]
INFO:     Started server process [16452]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
🔍 spaCy not available, using lightweight analysis
INFO:     127.0.0.1:50921 - "POST /assistant-message HTTP/1.1" 200 OK
INFO:     127.0.0.1:50925 - "POST /assistant-message HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "OPTIONS /ingest-pdf HTTP/1.1" 200 OK
/Users/jordannakamoto/start/ai-service/pocketflow.py:7: UserWarning: Overwriting successor for action 'default'
  if action in self.successors: warnings.warn(f"Overwriting successor for action '{action}'")
🔍 DEBUG: Received 1 pages
🔍 DEBUG: Total characters: 31201
🔍 DEBUG: Page 1: 31201 characters
🔍 DEBUG: Page 1 preview: Sample ContractContract No.___________PROFESSIONAL SERVICES AGREEMENTTHIS AGREEMENT made and entered...
INFO:     127.0.0.1:50948 - "POST /ingest-pdf HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "OPTIONS /assistant-message HTTP/1.1" 200 OK
🔍 Starting deterministic analysis of 50 segments
🔍 Deterministic Analysis: 122 claims, 19 entities
🔍 Claim types: conditional, permission, definition, obligation, prohibition, statement
INFO:     127.0.0.1:50948 - "POST /assistant-message HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50948 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50951 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:50951 - "POST /resolve-citation HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'services.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [16452]
Process SpawnProcess-38:
Traceback (most recent call last):
  File "/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
    ~~~~~~~~^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/jordannakamoto/start/ai-service/ai-service-env/lib/python3.13/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    ~~~~~~^^^^^^^^^^^^^^^^^
  File "/Users/jordannakamoto/start/ai-service/ai-service-env/lib/python3.13/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
  File "/Users/jordannakamoto/start/ai-service/ai-service-env/lib/python3.13/site-packages/uvicorn/server.py", line 71, in serve
    await self._serve(sockets)
  File "/Users/jordannakamoto/start/ai-service/ai-service-env/lib/python3.13/site-packages/uvicorn/server.py", line 78, in _serve
    config.load()
    ~~~~~~~~~~~^^
  File "/Users/jordannakamoto/start/ai-service/ai-service-env/lib/python3.13/site-packages/uvicorn/config.py", line 436, in load
    self.loaded_app = import_from_string(self.app)
                      ~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/Users/jordannakamoto/start/ai-service/ai-service-env/lib/python3.13/site-packages/uvicorn/importer.py", line 19, in import_from_string
    module = importlib.import_module(module_str)
  File "/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/importlib/__init__.py", line 88, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 1026, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "/Users/jordannakamoto/start/ai-service/main.py", line 4, in <module>
    from services import ingest_pdf, process_assistant_message, resolve_citation
  File "/Users/jordannakamoto/start/ai-service/services.py", line 20, in <module>
    deterministic_engine = DeterministicAnalysisEngine()
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
NameError: name 'DeterministicAnalysisEngine' is not defined
WARNING:  WatchFiles detected changes in 'services.py'. Reloading...
INFO:     Started server process [17732]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'services.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [17732]
INFO:     Started server process [17742]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'enhanced_inference.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [17742]
INFO:     Started server process [17752]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'enhanced_inference.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [17752]
INFO:     Started server process [17760]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'enhanced_inference.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [17760]
INFO:     Started server process [17768]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'services.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [17768]
INFO:     Started server process [19619]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'services.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [19619]
INFO:     Started server process [19663]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'services.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [19663]
INFO:     Started server process [19680]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'services.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [19680]
INFO:     Started server process [19694]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'test_hybrid_analysis.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [19694]
INFO:     Started server process [21059]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
🔍 spaCy not available, using lightweight analysis
INFO:     127.0.0.1:51238 - "POST /assistant-message HTTP/1.1" 200 OK
INFO:     127.0.0.1:51259 - "OPTIONS /ingest-pdf HTTP/1.1" 200 OK
/Users/jordannakamoto/start/ai-service/pocketflow.py:7: UserWarning: Overwriting successor for action 'default'
  if action in self.successors: warnings.warn(f"Overwriting successor for action '{action}'")
🔍 DEBUG: Received 1 pages
🔍 DEBUG: Total characters: 31201
🔍 DEBUG: Page 1: 31201 characters
🔍 DEBUG: Page 1 preview: Sample ContractContract No.___________PROFESSIONAL SERVICES AGREEMENTTHIS AGREEMENT made and entered...
INFO:     127.0.0.1:51259 - "POST /ingest-pdf HTTP/1.1" 200 OK
INFO:     127.0.0.1:51259 - "OPTIONS /assistant-message HTTP/1.1" 200 OK
🔍 Starting deterministic analysis of 50 segments
🔍 Deterministic Analysis: 122 claims, 19 entities
🔍 Claim types: prohibition, obligation, permission, definition, conditional, statement
INFO:     127.0.0.1:51259 - "POST /assistant-message HTTP/1.1" 200 OK
INFO:     127.0.0.1:51259 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:51259 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:51259 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:51259 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:51259 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:51259 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:51259 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:51259 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:51259 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:51259 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:51259 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:51259 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:51259 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:51259 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:51259 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:51266 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:51268 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:51270 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:51272 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:51274 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:51276 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:51284 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:51286 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:51288 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:51593 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:51618 - "OPTIONS /ingest-pdf HTTP/1.1" 200 OK
/Users/jordannakamoto/start/ai-service/pocketflow.py:7: UserWarning: Overwriting successor for action 'default'
  if action in self.successors: warnings.warn(f"Overwriting successor for action '{action}'")
🔍 DEBUG: Received 1 pages
🔍 DEBUG: Total characters: 31201
🔍 DEBUG: Page 1: 31201 characters
🔍 DEBUG: Page 1 preview: Sample ContractContract No.___________PROFESSIONAL SERVICES AGREEMENTTHIS AGREEMENT made and entered...
INFO:     127.0.0.1:51618 - "POST /ingest-pdf HTTP/1.1" 200 OK
INFO:     127.0.0.1:51618 - "OPTIONS /assistant-message HTTP/1.1" 200 OK
🔍 Starting deterministic analysis of 50 segments
🔍 Deterministic Analysis: 122 claims, 19 entities
🔍 Claim types: prohibition, obligation, permission, definition, conditional, statement
INFO:     127.0.0.1:51618 - "POST /assistant-message HTTP/1.1" 200 OK
INFO:     127.0.0.1:51618 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:51618 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:51618 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:51618 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:51618 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:51618 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:51618 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:51618 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:51618 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:51618 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:51618 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:51618 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:51618 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:51618 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:51618 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:51618 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:51618 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:51623 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:53207 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:53210 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:53210 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:54286 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:54286 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:54289 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:54291 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:54669 - "OPTIONS /ingest-pdf HTTP/1.1" 200 OK
🔍 DEBUG: Received 1 pages
🔍 DEBUG: Total characters: 31201
🔍 DEBUG: Page 1: 31201 characters
🔍 DEBUG: Page 1 preview: Sample ContractContract No.___________PROFESSIONAL SERVICES AGREEMENTTHIS AGREEMENT made and entered...
INFO:     127.0.0.1:54669 - "POST /ingest-pdf HTTP/1.1" 200 OK
INFO:     127.0.0.1:54669 - "OPTIONS /assistant-message HTTP/1.1" 200 OK
🔍 Starting deterministic analysis of 50 segments
🔍 Deterministic Analysis: 122 claims, 19 entities
🔍 Claim types: prohibition, obligation, permission, definition, conditional, statement
INFO:     127.0.0.1:54669 - "POST /assistant-message HTTP/1.1" 200 OK
INFO:     127.0.0.1:54669 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:54669 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:54669 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:54669 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:54669 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:54669 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:54669 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:54669 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:54669 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:54669 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:54669 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:54669 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:54669 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:54669 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:54669 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:54669 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:54669 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:54669 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:54669 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:54669 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:54669 - "POST /resolve-citation HTTP/1.1" 200 OK
🔍 Starting deterministic analysis of 50 segments
🔍 Deterministic Analysis: 122 claims, 19 entities
🔍 Claim types: prohibition, obligation, permission, definition, conditional, statement
INFO:     127.0.0.1:54706 - "POST /assistant-message HTTP/1.1" 200 OK
INFO:     127.0.0.1:54706 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:54706 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:54706 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:54706 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:54706 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:54706 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:54706 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:54706 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:54706 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:54706 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:54706 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:54706 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:54706 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:54706 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:54706 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:54706 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:54706 - "POST /resolve-citation HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'services.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [21059]
Python(39731) MallocStackLogging: can't turn off malloc stack logging because it was not enabled.
INFO:     Started server process [39731]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'services.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [39731]
Python(39735) MallocStackLogging: can't turn off malloc stack logging because it was not enabled.
INFO:     Started server process [39735]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
🔍 spaCy not available, using lightweight analysis
INFO:     127.0.0.1:55083 - "OPTIONS /assistant-message HTTP/1.1" 200 OK
INFO:     127.0.0.1:55083 - "POST /assistant-message HTTP/1.1" 200 OK
INFO:     127.0.0.1:55090 - "OPTIONS /ingest-pdf HTTP/1.1" 200 OK
/Users/jordannakamoto/start/ai-service/pocketflow.py:7: UserWarning: Overwriting successor for action 'default'
  if action in self.successors: warnings.warn(f"Overwriting successor for action '{action}'")
🔍 DEBUG: Received 1 pages
🔍 DEBUG: Total characters: 31201
🔍 DEBUG: Page 1: 31201 characters
🔍 DEBUG: Page 1 preview: Sample ContractContract No.___________PROFESSIONAL SERVICES AGREEMENTTHIS AGREEMENT made and entered...
INFO:     127.0.0.1:55090 - "POST /ingest-pdf HTTP/1.1" 200 OK
🔍 Starting deterministic analysis of 50 segments
🔍 Deterministic Analysis: 122 claims, 19 entities
🔍 Claim types: obligation, prohibition, permission, conditional, definition, statement
INFO:     127.0.0.1:55090 - "POST /assistant-message HTTP/1.1" 200 OK
INFO:     127.0.0.1:55090 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55090 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55090 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55090 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55090 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55090 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55090 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55090 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55090 - "POST /resolve-citation HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'services.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [39735]
Python(39839) MallocStackLogging: can't turn off malloc stack logging because it was not enabled.
WARNING:  WatchFiles detected changes in 'services.py'. Reloading...
INFO:     Started server process [39839]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
Python(39842) MallocStackLogging: can't turn off malloc stack logging because it was not enabled.
INFO:     Started server process [39842]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'services.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [39842]
Python(40026) MallocStackLogging: can't turn off malloc stack logging because it was not enabled.
INFO:     Started server process [40026]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'services.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [40026]
Python(40126) MallocStackLogging: can't turn off malloc stack logging because it was not enabled.
INFO:     Started server process [40126]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'services.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [40126]
Python(40172) MallocStackLogging: can't turn off malloc stack logging because it was not enabled.
INFO:     Started server process [40172]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'services.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [40172]
Python(40223) MallocStackLogging: can't turn off malloc stack logging because it was not enabled.
INFO:     Started server process [40223]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'services.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [40223]
Python(40311) MallocStackLogging: can't turn off malloc stack logging because it was not enabled.
INFO:     Started server process [40311]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
🔍 spaCy not available, using lightweight analysis
INFO:     127.0.0.1:55267 - "POST /assistant-message HTTP/1.1" 200 OK
INFO:     127.0.0.1:55271 - "POST /assistant-message HTTP/1.1" 200 OK
INFO:     127.0.0.1:55275 - "POST /assistant-message HTTP/1.1" 200 OK
INFO:     127.0.0.1:55294 - "OPTIONS /ingest-pdf HTTP/1.1" 200 OK
/Users/jordannakamoto/start/ai-service/pocketflow.py:7: UserWarning: Overwriting successor for action 'default'
  if action in self.successors: warnings.warn(f"Overwriting successor for action '{action}'")
🔍 DEBUG: Received 1 pages
🔍 DEBUG: Total characters: 31201
🔍 DEBUG: Page 1: 31201 characters
🔍 DEBUG: Page 1 preview: Sample ContractContract No.___________PROFESSIONAL SERVICES AGREEMENTTHIS AGREEMENT made and entered...
INFO:     127.0.0.1:55294 - "POST /ingest-pdf HTTP/1.1" 200 OK
INFO:     127.0.0.1:55294 - "OPTIONS /assistant-message HTTP/1.1" 200 OK
🔍 Starting deterministic analysis of 50 segments
🔍 Deterministic Analysis: 122 claims, 19 entities
🔍 Claim types: conditional, definition, permission, obligation, prohibition, statement
INFO:     127.0.0.1:55294 - "POST /assistant-message HTTP/1.1" 200 OK
INFO:     127.0.0.1:55294 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55294 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55294 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55294 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55294 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55294 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55294 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55294 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55294 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55294 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55294 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55294 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55294 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55294 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55294 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55294 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55294 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55294 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55294 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55294 - "POST /resolve-citation HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'services.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [40311]
Python(40740) MallocStackLogging: can't turn off malloc stack logging because it was not enabled.
INFO:     Started server process [40740]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'services.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [40740]
Python(40748) MallocStackLogging: can't turn off malloc stack logging because it was not enabled.
INFO:     Started server process [40748]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'services.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [40748]
Python(40760) MallocStackLogging: can't turn off malloc stack logging because it was not enabled.
INFO:     Started server process [40760]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
🔍 spaCy not available, using lightweight analysis
INFO:     127.0.0.1:55374 - "POST /assistant-message HTTP/1.1" 200 OK
INFO:     127.0.0.1:55378 - "POST /assistant-message HTTP/1.1" 200 OK
INFO:     127.0.0.1:55396 - "OPTIONS /ingest-pdf HTTP/1.1" 200 OK
/Users/jordannakamoto/start/ai-service/pocketflow.py:7: UserWarning: Overwriting successor for action 'default'
  if action in self.successors: warnings.warn(f"Overwriting successor for action '{action}'")
🔍 DEBUG: Received 1 pages
🔍 DEBUG: Total characters: 31201
🔍 DEBUG: Page 1: 31201 characters
🔍 DEBUG: Page 1 preview: Sample ContractContract No.___________PROFESSIONAL SERVICES AGREEMENTTHIS AGREEMENT made and entered...
INFO:     127.0.0.1:55396 - "POST /ingest-pdf HTTP/1.1" 200 OK
INFO:     127.0.0.1:55396 - "OPTIONS /assistant-message HTTP/1.1" 200 OK
🔍 Starting deterministic analysis of 50 segments
🔍 Deterministic Analysis: 122 claims, 19 entities
🔍 Claim types: statement, definition, conditional, obligation, prohibition, permission
INFO:     127.0.0.1:55396 - "POST /assistant-message HTTP/1.1" 200 OK
🔍 Starting deterministic analysis of 50 segments
🔍 Deterministic Analysis: 122 claims, 19 entities
🔍 Claim types: statement, definition, conditional, obligation, prohibition, permission
INFO:     127.0.0.1:55399 - "POST /assistant-message HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'services.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [40760]
Python(41108) MallocStackLogging: can't turn off malloc stack logging because it was not enabled.
INFO:     Started server process [41108]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'services.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [41108]
Python(41143) MallocStackLogging: can't turn off malloc stack logging because it was not enabled.
INFO:     Started server process [41143]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'services.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [41143]
Python(41221) MallocStackLogging: can't turn off malloc stack logging because it was not enabled.
INFO:     Started server process [41221]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
🔍 spaCy not available, using lightweight analysis
INFO:     127.0.0.1:55455 - "POST /assistant-message HTTP/1.1" 200 OK
INFO:     127.0.0.1:55475 - "OPTIONS /ingest-pdf HTTP/1.1" 200 OK
/Users/jordannakamoto/start/ai-service/pocketflow.py:7: UserWarning: Overwriting successor for action 'default'
  if action in self.successors: warnings.warn(f"Overwriting successor for action '{action}'")
🔍 DEBUG: Received 1 pages
🔍 DEBUG: Total characters: 31201
🔍 DEBUG: Page 1: 31201 characters
🔍 DEBUG: Page 1 preview: Sample ContractContract No.___________PROFESSIONAL SERVICES AGREEMENTTHIS AGREEMENT made and entered...
INFO:     127.0.0.1:55475 - "POST /ingest-pdf HTTP/1.1" 200 OK
INFO:     127.0.0.1:55475 - "OPTIONS /assistant-message HTTP/1.1" 200 OK
🔍 Starting deterministic analysis of 50 segments
🔍 Deterministic Analysis: 122 claims, 19 entities
🔍 Claim types: conditional, obligation, prohibition, statement, permission, definition
🔍 Strategic rewrite: Found 8 sections to rewrite
🔍 Section 1: ## 1. Obligation Claims
- **Consultant Duties**: The CONSULTANT agrees to exercise special skill to ...
🔍 Section 2: ## 2. Financial Requirements
- **Compensation Structure**: The COMMISSION agrees to pay the CONSULTA...
🔍 Section 3: ## 3. Performance Standards
- **Deliverable Items**: The COMMISSION may delay payment and/or termina...
🔍 Section 4: ## 4. Termination Clauses
- **Termination for Convenience**: The COMMISSION may terminate this Agree...
🔍 Section 5: ## 5. Indemnification and Liability
- **Indemnification**: The CONSULTANT shall indemnify, defend, a...
🔍 Section 6: ## 6. Insurance Requirements
- **Insurance Coverage**: The CONSULTANT must maintain insurance covera...
🔍 Section 7: ## 7. Definitions
- **Scope of Services**: The term "results in a manner reasonably satisfactory to ...
🔍 Section 8: ## 8. Key Entities
- **Consultant**: The party providing services under this Agreement. [p1.para5.s2...
INFO:     127.0.0.1:55475 - "POST /assistant-message HTTP/1.1" 200 OK
INFO:     127.0.0.1:55475 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55475 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55475 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55475 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55475 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55475 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55475 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55475 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55475 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55475 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55475 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55475 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55475 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55475 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55475 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55475 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55475 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55475 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55475 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55475 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55475 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55475 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55475 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55475 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55475 - "POST /resolve-citation HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'services.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [41221]
Python(41659) MallocStackLogging: can't turn off malloc stack logging because it was not enabled.
INFO:     Started server process [41659]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
🔍 spaCy not available, using lightweight analysis
INFO:     127.0.0.1:55515 - "POST /assistant-message HTTP/1.1" 200 OK
INFO:     127.0.0.1:55531 - "OPTIONS /ingest-pdf HTTP/1.1" 200 OK
/Users/jordannakamoto/start/ai-service/pocketflow.py:7: UserWarning: Overwriting successor for action 'default'
  if action in self.successors: warnings.warn(f"Overwriting successor for action '{action}'")
🔍 DEBUG: Received 1 pages
🔍 DEBUG: Total characters: 31201
🔍 DEBUG: Page 1: 31201 characters
🔍 DEBUG: Page 1 preview: Sample ContractContract No.___________PROFESSIONAL SERVICES AGREEMENTTHIS AGREEMENT made and entered...
INFO:     127.0.0.1:55531 - "POST /ingest-pdf HTTP/1.1" 200 OK
INFO:     127.0.0.1:55531 - "OPTIONS /assistant-message HTTP/1.1" 200 OK
🔍 Starting deterministic analysis of 50 segments
🔍 Deterministic Analysis: 122 claims, 19 entities
🔍 Claim types: obligation, statement, prohibition, permission, definition, conditional
🔍 Strategic rewrite: Found 7 sections to rewrite
🔍 Section 1: ## 1. Obligation Claims
- **Consultant Duties**: The CONSULTANT agrees to exercise special skill to ...
🔍 Section 2: ## 2. Financial Requirements
- **Compensation Structure**: The total payment is not to exceed a spec...
🔍 Section 3: ## 3. Performance Standards
- **Detailed Reporting**: Reports must be sufficiently detailed for the ...
🔍 Section 4: ## 4. Termination Clauses
- **Termination for Convenience**: The COMMISSION may terminate this Agree...
🔍 Section 5: ## 5. Insurance Requirements
- **Insurance Coverage**: The CONSULTANT must maintain specified insura...
🔍 Section 6: ## 6. Conditional Clauses
- **Conditional Payments**: A pro-rata portion of the CONSULTANT’s fixed f...
🔍 Section 7: ## 7. Definitions
- **Scope of Services**: The results the CONSULTANT is to achieve are defined in E...
INFO:     127.0.0.1:55531 - "POST /assistant-message HTTP/1.1" 200 OK
INFO:     127.0.0.1:55531 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55531 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55531 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55531 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55531 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55531 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55531 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55531 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55531 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55531 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55531 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55531 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55531 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55531 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55531 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55531 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55531 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55531 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55531 - "POST /resolve-citation HTTP/1.1" 200 OK
INFO:     127.0.0.1:55531 - "POST /resolve-citation HTTP/1.1" 200 OK
